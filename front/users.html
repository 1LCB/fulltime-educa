<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Criar Usuário</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
        $(document).ready(function () {
            $(".hamburger").click(function () {
                $(".wrapper").toggleClass("collapse");
            });
        });
    </script>
</head>

<body>

    <div class="wrapper">
        <!--navbar-->
        <div class="top_navbar">
            <div class="hamburger">
                <img width="38px" height="38px" src="logo_preto 1.png" alt="">
            </div>
            <div class="top_menu">
                <div class="logo">Full Educa</div>
                <ul>
                </ul>
            </div>
        </div>
        <!--sidebar-->
        <div class="sidebar">
            <ul>
                <li><a href="dashboard.html">
                        <span class="icon"><img width="33px" height="33px" src="Vector.png" alt=""></span>
                        <span class="title">Gráficos</span>
                    </a></li>
                <li><a href="users.html">
                        <span class="icon"><img width="33px" height="33px" src="IconCreateUser.png" alt=""></span>
                        <span class="title">Criar Usuário</span>
                    </a></li>
            </ul>
        </div>
        <!--main_container-->
        <div class="main_container">
            <main>
                <!--imagem do usuário-->
                <div class="imguser">
                    <h1>Imagem do Usuário</h1>
                    <hr style="margin-bottom: 10px; margin-top: 10px;" />
                    <div class="form-group position-relative">
                        <div class="upload-container" onclick="document.getElementById('fileInput').click()">
                            <img src="images/Vector (1).png" alt="Upload Icon">
                            <input type="file" id="fileInput" accept="image/*">
                            <p class="text-form-I">Selecione ou arraste sua imagem aqui</p>
                            <p class="text-form-II">Clique aqui para seleciona</p>
                        </div>
                    </div>
                    <div class="fill">
                        <img src="images/Vector (5).png" alt="">
                        <p>Este campo é obrigatório</p>
                    </div>
                </div>
                <!--Escolher os usuários-->
                <div class="user">
                    <h1>Tipo de Usuário</h1>
                    <hr />
                    <div class="tipuser">
                        <div class="tipo">
                            <img src="images/Vector (4).png" alt="">
                            <h3>Professor</h3>
                        </div>
                        <div class="tipo" id="myBtn">
                            <img src="images/Vector (3).png" alt="">
                            <h3>Aluno</h3>
                        </div>
                        <div class="tipo">
                            <img src="images/pessoa.png" alt="">
                            <h3>Administrador</h3>
                        </div>
                    </div>
                </div>
            </main>
            <!--formulario aluno-->

            <div id="myModal" class="detalhes">
                <span id="closeModalBtn" class="close" style="margin-right: 10px;">&times;</span>
                <h2 style="text-align: center;">Detalhes do Usuário</h2>

                <form>
                    <div class="dtaname">
                        <label for="username">Nome de Usuário:</label>
                        <input type="text" id="username" name="username" placeholder="Digitar nome do usuário" required>
                    </div><br>

                    <div class="dtaemail">
                        <label for="email">E-mail:</label>
                        <input type="email" id="email" name="email" placeholder="Digitar email do usuário" required>
                    </div><br>

                    <div class="dtara">
                        <label for="ra">RA:</label>
                        <input type="text" id="ra" name="ra" required>
                    </div><br>

                    <div class="dtaturma">
                        <label for="turma_ingresso">Turma de Ingresso:</label>
                        <input type="text" id="turma_ingresso" name="turma_ingresso" required>
                    </div><br>

                    <div class="dtasexo">
                        <label for="sexo">Sexo:</label>
                        <select id="sexo" name="sexo" required>
                            <option value="masculino">Masculino</option>
                            <option value="feminino">Feminino</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div><br>

                    <div class="dtacor">
                        <label for="cor">Cor:</label>
                        <input type="text" id="cor" name="cor" required>
                    </div><br>

                    <div class="dtacidade">
                        <label for="cidade_nascimento">Cidade de Nascimento:</label>
                        <input type="text" id="cidade_nascimento" name="cidade_nascimento"
                            placeholder="Digitar cidade de nascimento" required>
                    </div><br>

                    <div class="dtarg">
                        <label for="rg">RG:</label>
                        <input type="text" id="rg" name="rg" placeholder="(000.000.000-0)" required>
                    </div><br>

                    <div class="dtacpf">
                        <label for="cpf">CPF:</label>
                        <input type="text" id="cpf" name="cpf" placeholder="(00000000000)" required>
                    </div><br>

                    <div class="dtatelefone">
                        <label for="telefone_celular">Telefone Celular:</label>
                        <input type="tel" id="telefone_celular" name="telefone_celular"
                            placeholder="Digitar número de telefone" required>
                    </div><br>

                    <div class="dtaendereco">
                        <label for="endereco">Endereço:</label>
                        <input type="text" id="endereco" name="endereco" placeholder="Digitar Endereço" required>
                    </div><br>

                    <div class="dtacomplemento">
                        <label for="complemento_residencial">Complemento Residencial:</label>
                        <input type="text" id="complemento_residencial" placeholder="Digitar complemento residencial"
                            name="complemento_residencial">
                    </div><br>

                    <div class="dtapai">
                        <label for="pai">Pai:</label>
                        <input type="text" id="pai" name="pai" placeholder="Digitar nome do pai" required>
                    </div><br>

                    <div class="dtamae">
                        <label for="mae">Mãe:</label>
                        <input type="text" id="mae" name="mae" placeholder="Digitar nome da mãe">
                    </div><br>

                    <div class="dtaescolacursada">
                        <label for="escola_cursada">Escola Cursada no Ensino Médio:</label>
                        <input type="text" id="escola_cursada" name="escola_cursada" required>
                    </div><br>

                    <div class="dtaescolaatual">
                        <label for="escola_atual">Escola Atual:</label>
                        <input type="text" id="escola_atual" name="escola_atual" required>
                    </div><br>

                    <div class="dta turno-container">
                        <label for="turno">Turno</label>
                        <div class="turno-options">
                            <input type="radio" id="manha" name="turno" value="manha">
                            <label for="manha" class="turno-label">Manhã</label>

                            <input type="radio" id="tarde" name="turno" value="tarde">
                            <label for="tarde" class="turno-label">Tarde</label>

                            <input type="radio" id="noite" name="turno" value="noite">
                            <label for="noite" class="turno-label">Noite</label>
                        </div>
                    </div><br>

                    <div class="dtasetor">
                        <label for="setor">Setor:</label>
                        <input type="text" id="setor" name="setor" required>
                    </div><br>

                    <div class="dtadataingresso">
                        <label for="data_ingresso">Data de Ingresso:</label>
                        <input type="date" id="data_ingresso" name="data_ingresso" placeholder="00/00/0000" required>
                    </div><br>

                    <div class="dataconclusao">
                        <label for="data_conclusao">Data de Conclusão:</label>
                        <input type="date" id="data_conclusao" name="data_conclusao" required>
                    </div><br>

                    <div class="dtatrabalha">
                        <label for="trabalha">Trabalha?</label>
                        <select id="trabalha" name="trabalha" required>
                            <option value="sim">Sim</option>
                            <option value="nao">Não</option>
                        </select>
                    </div><br>

                    <div class="dtasituacao">
                        <label for="situacao">Situação:</label>
                        <input type="text" id="situacao" name="situacao" required>
                    </div><br>

                    <div class="dta">
                        <button class="button button-cancel">Cancelar</button>
                        <button class="button button-save" onclick="create_user()">Salvar</button>
                    </div>
                </form>
            </div>

        </div>
        <script src="script.js"></script>
        <script>
            function create_user() {
                const name = document.getElementById("username").value;
                const email = document.getElementById("email").value;
                const ra = document.getElementById("ra").value;
                const turma_ingresso = document.getElementById("turma_ingresso").value;
                const gender = document.getElementById("sexo").value;
                const ethnicity = document.getElementById("cor").value;
                const birth_city = document.getElementById("cidade_nascimento").value;
                const id_card = document.getElementById("rg").value;
                const cpf = document.getElementById("cpf").value;
                const phone = document.getElementById("telefone_celular").value;
                const address = document.getElementById("endereco").value;
                const residential_complement = document.getElementById("complemento_residencial").value;
                const father_name = document.getElementById("pai").value;
                const mother_name = document.getElementById("mae").value;
                const school_attended = 1; //document.getElementById("escola_cursada").value;
                const current_school = 1; //document.getElementById("escola_atual").value;
                const shift = document.querySelector("input[name='turno']:checked").value;
                const sector_id = 1; //document.getElementById("setor").value;
                const admission_date = document.getElementById("data_ingresso").value;
                const completion_date = document.getElementById("data_conclusao").value;
                const course_status = document.getElementById("situacao").value;

                // Supondo que os campos "total_classes", "attendances", "absences" e "image" não estão no formulário
                const total_classes = 0; // Valor padrão
                const attendances = 0; // Valor padrão
                const absences = 0; // Valor padrão
                const image = "..."; // Valor padrão

                // Crie o payload com os dados
                const payload = {
                    name,
                    email,
                    date_of_birth: "", // Não disponível no formulário
                    gender,
                    ethnicity,
                    birth_city,
                    id_card,
                    cpf,
                    phone,
                    address,
                    residential_complement,
                    father_name,
                    mother_name,
                    school_attended: parseInt(school_attended),
                    current_school: parseInt(current_school),
                    shift,
                    sector_id: parseInt(sector_id),
                    admission_date,
                    completion_date,
                    course_status,
                    total_classes,
                    attendances,
                    absences,
                    image
                };

                // Faça o POST para a API
                fetch("http://localhost:8000/api/student", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(payload)
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log("Success:", data);
                    })
                    .catch(error => {
                        console.error("Error:", error);
                    });
            }
        </script>
</body>

</html>